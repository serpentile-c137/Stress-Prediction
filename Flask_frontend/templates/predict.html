<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stress-O-Meter</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style_predict.css') }}"
    />
    <script>
      const getStressValue = "{{prediction_text}}";
    </script>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="/">Stress-O-Meter</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/info">Info</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="result-container">
        <h2>Stress Predcition Result</h2>
        <p>You have {{prediction_text}} % stress predicted.</p>
      </div>

      <!-- Gauge -->
      <div class="gauge">
        <div class="gauge__body">
          <div class="gauge__fill"></div>
          <div class="gauge__cover"></div>
        </div>
      </div>

      <div id="suggestion"></div>
    </div>

    <footer class="my-5 pt-5 text-muted text-center text-small mt-auto">
      <p class="mb-1">&copy; Developed by Shardul, Garuav & Athar</p>
      <ul class="list-inline">
        <li class="list-inline-item"><a href="#">Privacy</a></li>
        <li class="list-inline-item"><a href="#">Terms</a></li>
        <li class="list-inline-item"><a href="#">Support</a></li>
      </ul>
    </footer>

    <script>
      const gaugeElement = document.querySelector(".gauge");
      //   console.log(getStressValue);
      const stressValue = getStressValue / 100;
      function setGaugeValue(gauge, value) {
        if (value < 0 || value > 1) {
          return;
        }

        gauge.querySelector(".gauge__fill").style.transform = `rotate(${
          value / 2
        }turn)`;
        gauge.querySelector(".gauge__cover").textContent = `${Math.round(
          value * 100
        )}%`;
      }
      // setTimeout(2000);
      console.log("stress value:");
      console.log(stressValue);
      // setGaugeValue(gaugeElement, stressValue);
      setTimeout(() => {
        // console.log("stress value:", stressValue);
        setGaugeValue(gaugeElement, stressValue);
      }, 800);
      console.log(stressValue);
      if (stressValue >= 0 && stressValue < 0.25) {
        document.getElementById("suggestion").innerHTML =
          "<h3>Stress level is low. Try to maintain your stress level for good health.</h3>";
      } else if (stressValue >= 0.25 && stressValue < 0.5) {
        document.getElementById("suggestion").innerHTML =
          "<h3>Stress level is mild.Try to doing exercises to reduce your stress level for good health.</h3>";
      } else if (stressValue >= 0.5 && stressValue < 0.75) {
        document.getElementById("suggestion").innerHTML =
          "<h3>Stress level is moderate. Consider seeking help from a healthcare professional.</h3>";
      } else if (stressValue >= 0.75 && stressValue <= 1) {
        document.getElementById("suggestion").innerHTML =
          "<h3>Stress level is high. Please consult with a healthcare professional Immediately.</h3>";
      }
    </script>
  </body>
</html>
